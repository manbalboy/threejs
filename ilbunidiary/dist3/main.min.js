(()=>{"use strict";var e,t={4781:(e,t,o)=>{o(4750),o(4994),o(8821),o(853),o(3290),o(4845),o(5007),o(9275),o(6364),o(6632),o(1928),o(4883),o(8995);var n=o(6075),i=o(636);o(6543),o(3142),o(174);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===r(a)?a:String(a)),n)}var i,a}function s(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}var l=s((function e(t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moving=!1,t.gltfLoader.load(t.modelSrc,(function(e){e.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),o.modelMesh=e.scene.children[0],o.modelMesh.position.y=.3,o.modelMesh.name="ilbuni",t.scene.add(o.modelMesh),t.meshes.push(o.modelMesh),o.actions=[],o.mixer=new n.Xcj(o.modelMesh),o.actions[3]=o.mixer.clipAction(e.animations[3]),o.actions[1]=o.mixer.clipAction(e.animations[1]),o.actions[3].play()}))}));function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,r=void 0,r=function(e,t){if("object"!==c(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===c(r)?r:String(r)),n)}var i,r}function u(e,t,o){return t&&d(e.prototype,t),o&&d(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}var h=u((function e(t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t.x,this.y=t.y,this.z=t.z,this.visible=!1,t.gltfLoader.load(t.modelSrc,(function(e){o.modelMesh=e.scene.children[0],o.modelMesh.castShadow=!0,o.modelMesh.position.set(o.x,o.y,o.z),t.scene.add(o.modelMesh)}))})),f=o(5435);function p(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var w=(new n.dpR).load("/images/grid.png");w.wrapS=n.rpg,w.wrapT=n.rpg,w.repeat.x=10,w.repeat.y=10;var y=document.querySelector("#three-canvas"),v=new n.CP7({canvas:y,antialias:!0});v.setSize(window.innerWidth,window.innerHeight),v.setPixelRatio(window.devicePixelRatio>1?2:1),v.shadowMap.enabled=!0,v.shadowMap.type=n.ntZ;var b=new n.xsS,g=new n.iKG(-window.innerWidth/window.innerHeight,window.innerWidth/window.innerHeight,1,-1,-1e3,1e3),M=new n.Pa4(1,5,5);g.position.set(M.x,M.y,M.z),g.zoom=.2,g.updateProjectionMatrix(),b.add(g);var x=new n.Mig("white",.7);b.add(x);var S=new n.Ox3("white",.5),j=new n.Pa4(1,1,1);S.position.x=j.x,S.position.y=j.y,S.position.z=j.z,S.castShadow=!0,S.shadow.mapSize.width=2048,S.shadow.mapSize.height=2048,S.shadow.camera.left=-100,S.shadow.camera.right=100,S.shadow.camera.top=100,S.shadow.camera.bottom=-100,S.shadow.camera.near=-100,S.shadow.camera.far=100,b.add(S);var z=[],P=new n.Kj0(new n._12(100,100),new n.Wid({map:w}));P.name="floor",P.rotation.x=-Math.PI/2,P.receiveShadow=!0,b.add(P),z.push(P);var O=new n.Kj0(new n._12(1,1),new n.vBJ({color:"crimson",transparent:!0,opacity:.5}));O.rotation.x=-Math.PI/2,O.position.y=.01,O.receiveShadow=!0,b.add(O);var E=new n.Kj0(new n._12(3,3),new n.Wid({color:"yellow",transparent:!0,opacity:.5}));E.position.set(5,.005,5),E.rotation.x=-Math.PI/2,E.receiveShadow=!0,b.add(E);var L=new i.E,A=new h({gltfLoader:L,scene:b,modelSrc:"./models/house.glb",x:5,y:-1.3,z:2}),k=new l({scene:b,meshes:z,gltfLoader:L,modelSrc:"./models/test.glb"}),W=new n.iMs,T=new n.FM8,C=new n.Pa4,H=0,I=!1,Z=new n.SUY;function _(e){T.x=e.clientX/y.clientWidth*2-1,T.y=-(e.clientY/y.clientHeight*2-1)}window.addEventListener("resize",(function(){g.left=-window.innerWidth/window.innerHeight,g.right=window.innerWidth/window.innerHeight,g.top=1,g.bottom=-1,g.updateProjectionMatrix(),v.setSize(window.innerWidth,window.innerHeight),v.render(b,g)})),y.addEventListener("mousedown",(function(e){I=!0,_(e)})),y.addEventListener("mouseup",(function(){I=!1})),y.addEventListener("mousemove",(function(e){I&&_(e)})),y.addEventListener("touchstart",(function(e){I=!0,_(e.touches[0])})),y.addEventListener("touchend",(function(){I=!1})),y.addEventListener("touchmove",(function(e){I&&_(e.touches[0])})),function e(){var t=Z.getDelta();k.mixer&&k.mixer.update(t),k.modelMesh&&g.lookAt(k.modelMesh.position),k.modelMesh&&(I&&(W.setFromCamera(T,g),function(){var e,t=p(W.intersectObjects(z));try{for(t.s();!(e=t.n()).done;){var o=e.value;"floor"===o.object.name&&(C.x=o.point.x,C.y=.3,C.z=o.point.z,k.modelMesh.lookAt(C),k.moving=!0,O.position.x=C.x,O.position.z=C.z);break}}catch(e){t.e(e)}finally{t.f()}}()),k.moving?(H=Math.atan2(C.z-k.modelMesh.position.z,C.x-k.modelMesh.position.x),k.modelMesh.position.x+=.05*Math.cos(H),k.modelMesh.position.z+=.05*Math.sin(H),g.position.x=M.x+k.modelMesh.position.x,g.position.z=M.z+k.modelMesh.position.z,k.actions[3].stop(),k.actions[1].play(),Math.abs(C.x-k.modelMesh.position.x)<.03&&Math.abs(C.z-k.modelMesh.position.z)<.03&&(k.moving=!1),Math.abs(E.position.x-k.modelMesh.position.x)<1.5&&Math.abs(E.position.z-k.modelMesh.position.z)<1.5?A.visible||(A.visible=!0,E.material.color.set("seagreen"),f.ZP.to(A.modelMesh.position,{duration:1,y:1,ease:"Bounce.easeOut"}),f.ZP.to(g.position,{duration:1,y:3})):A.visible&&(A.visible=!1,E.material.color.set("yellow"),f.ZP.to(A.modelMesh.position,{duration:.5,y:-1.3}),f.ZP.to(g.position,{duration:1,y:5}))):(k.actions[1].stop(),k.actions[3].play())),v.render(b,g),v.setAnimationLoop(e)}()}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var r=o[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,o,i,r)=>{if(!o){var a=1/0;for(d=0;d<e.length;d++){for(var[o,i,r]=e[d],s=!0,l=0;l<o.length;l++)(!1&r||a>=r)&&Object.keys(n.O).every((e=>n.O[e](o[l])))?o.splice(l--,1):(s=!1,r<a&&(a=r));if(s){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,i,r]},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var i,r,[a,s,l]=o,c=0;if(a.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)var d=l(n)}for(t&&t(o);c<a.length;c++)r=a[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},o=self.webpackChunkthreejs_study=self.webpackChunkthreejs_study||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=n.O(void 0,[853],(()=>n(4781)));i=n.O(i)})();